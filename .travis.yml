###
# #%L
# kotlin-maven-plugin-tools
# %%
# Copyright (C) 2018 GantSign Ltd.
# %%
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# #L%
###
---
dist: xenial

language: java

jdk: openjdk8

before_cache:
  - rm --force --recursive --verbose $HOME/.m2/repository/com/github/gantsign

cache:
  directories:
    - $HOME/.m2

install: true

jobs:
  include:
    - stage: Test
      script: .travis/test.sh
      after_success:
        - bash <(curl -s https://codecov.io/bash)

    - stage: Deploy
      script: .travis/deploy.sh
      if: type = push AND (tag IS present)

branches:
  only:
    - master
    - /^(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)([\.\-].*)?$/

env:
  global:
    # BINTRAY_USER
    - secure: Gf/7VqgMMkpQpS2kloOEwhHG+ZfXlW+bQk2WUp5/G7HMSdWo+gsYH0Ub5tQyPofw0gS37m+heW+h1+0wVcFkwEM7xaeUvITxEfvZ3PjWL05XcCboSR+vXd7kybswfdLUpehiWymLYf2VhBldcUicN4RXcUI5mNlRfmPaPiNidi64chpWBXRNJ2KlfmpwGRI4MaHwvTdhApgDx9YYgSI1pbGNkZRMH3x/gECT0AfigSv3sDTY5kDqlUjrZSKdpxfwJ1vE8XBx0Imrw+3TzeXCmU1Uek2Qp+5sktk434gpYYj4lhYSJ0C1c6IVmBtqd1tm7K/aYItXowKUldO/owHCz4EVA2hyBCsYbqYIN6luF3JT9W12kZ2CCcYR5NxDfVCCNd8zedP4Mu4PugCAYS15CcO2sY0ANFcsydJoLVuKE/H/wNP97DPhYNr07+U6VSIMiNzPb2qjLsl4cTsbyFLMny1w5LVwWt0vbKUVv3s9hgRaFxnU5eFT0iggXpfvcNSwKPxufqkt3NZ7J1tBsOGgtMzDbmBR90slzMQxAqg3sDkfv6Yn6xzuvEWsuf18LpIP9n6dIIO7bo5lNlul2B05AQEH4bxtudTSc2DGPpnVt9ND+J6qRDObcSvNVJY4sgKvCHLN8vfCWGh/bwTFk0HOlnlSG6XlWbAmezP0aQw3idw=
    # BINTRAY_API_KEY
    - secure: HFz6aS67S9waxDo8C2121SFTqnWHOjeixYoYPsIrG8XT1Vl7/E82niE4sqf3CiU1h+3TqjEotpu2ZcD73FitxJ1st9vn5qY+z8iMhACDGSuo2q0E8nrpHltkdWtwykhWuvHa/StdrI2Xls9//1+4BklSCWwkYtBR0lzb2Tg585TbexlrbrB9/c5i/Goba89bXvizJm8jf9vcH7ktM8Jq7O8lcLlrDY7W7dNJ4Dyhfd36KyqZJJIRxaMaLQSeQ+qr54rnWoxA+nPbq4KaW0rfxBAx6mc760U63SgEHoUM6+aOW/+5Ee3a1pvPPBrRs7fZcM24Dq+Mb6JidjPiVne2horWaDmSKBa7HvaVXsd0AQXN0BXDTjEHXL6r8pSpXMOq98pdfL74O4UZfxCVrmW5DKQ8mTk9Qr9+zRkF5M+JpEySk7NHvxtFTCTXsXKiO/3pq2MtLN0kMgAaGTT8CIE5RKUyX4gyKQPXC9d8k1CuNrjB9K6DIB22Jqz5E3W7h5cC1VN6JkzeJOJaGw/c2NYflkMR9F1ct90vVLCp4WIGiqQUe1gRk1lyXKtnKg/eEUwL6XXn0YGfKmmbMUvkEuqmWpmpCHXh1J41/6aV29ejTa/H8jwQciNRxUVQdvsWObIuLQaducrFOUVoVmH0kqlMTPSoL11HonxgfGJ5uLPfvvg=
    # GPG_KEY_NAME
    - secure: LrQdhhhFaZO8vDyk9xPdhnoYTzPMYg1BSC2zoF/tQ1kASGO+RqC9HfhaAsjLFIe7WQgnd0b6pDjgHWr/Eu3vX3BzzIQT+v7lGkapBg3FYMwD5+FrE7N4TeOlnk4kg2COg/e8Z/hJ5tmrsuxLgZDvoIuGAm2rEVleWNdMZww2+Qw+nrb7G2X4c+aH+2OpYLpgoMYF3PJnmq+cH6pePS6QmTATPWUF/wb8vqWntBt0jReAWi/O48OvBmHXLQjKXpaTxSTGCD0+Aih8u7h/3TeIESjLgFfdkHS5Z4B3IT+9ri4rJTNoAFLB8x7bMRXrr+1cB04kpFErDT8nAiFyL70yixYBhSamrNmQBH/gtJ5qLMdBikYCZj0v/06614HR0dxaxK9GOs1FUFm4z0LVjuEhncErAGq6OZmo8133wguj3za/kyuMjKP4akVJwx7+/rRaIXokJkHe0YFz+ttiK33s/aLpP7LIwcYFUrqr3SVQVPQhn2qld9K6wtdROGLivJCeFecWB6GDEE/Qaze4Om/is44U3dFOwK/iPdvzgheDCMTApRRWouEofgelbCHY9kanfl9pGocagTh1sh5+EulgJ2mxVGn7Z2PdQk2uH0JiIrkW23l2dK8zX9qJ6Xizue+56pY4gtp9op32b7CkwYAjeaac6TG267XYdzQQCQ+LJJA=
    # GPG_PASSPHRASE
    - secure: KQEIyPIhZjdWVB6LUoyMmjVtjIhO7qhnTMeFemPCAaNCB5dPexOuCesvDptLKRyFQThmKj8/GUeBS/nEq/LO6Au+T6TFRUNy8Hwf22b5MG1wGOKOvXxidQpHRtpGw9mcQbidO3cbR2nZSIbHwRDTQtPs005/ehgALWR1iP5M8ZPk1Rq0/OcI0l4SLxAk+bX0ni9bLkQGHC9+GLdtfDS6SO1soHqLZ8IqvHIziIjUSaSWlmSPtWLDmQkwKuelBFa1uaXhP8TKHHUL/xWzZ7oTcPAwoJ2WBKkDo4p2qfIebpROfsPlQXwXL7BJZCwnTfG5Sx436KlNLT55F9eXUV8ueyfHbKKTSwzUwFlrnNwBho+5bthiNYOaVVG5MkcbECbLx+P555uX04Dh4/Ha3yzRwDrhcmLjUxvJKtMcIetCuAifwcFRd0W27k4Lj54eWrW5rZtk4h5lv1LiP4gQFjLRARsQ8VNACGChBDSbISSij0hlZlRnvfA1p8F04Q4T2DrinP9mjShT8hm+EVnm5eNtYtJAOe3gqaz+dgKn0DdcEJY1ue9LR3377ZEIwrjI3fKCb4sNQTvyY6aaxgsfa2VB/5s+k0EvIURPP5UmR8sp8+syOGV1CAzp+uBamKRxLSyGiy19B3T0DDPmpni2drLusUYeNzdE1/DzO7ytxMThhEQ=
